# å·¥ä½œæµå®Œæ•´æ¥å…¥ç¤ºä¾‹

# ğŸ“ RunningHub AI å·¥ä½œæµäº¤äº’ä½¿ç”¨æ‰‹å†Œï¼ˆworkflow ç‰ˆæœ¬ï¼‰

## 1. åŠŸèƒ½æ¦‚è¿°

æœ¬è„šæœ¬é€šè¿‡è°ƒç”¨ RunningHub AI å¹³å°çš„ OpenAPIï¼Œå®ç°ä»æœ¬åœ°åŠ è½½å·¥ä½œæµ JSONã€ä¿®æ”¹èŠ‚ç‚¹ä¿¡æ¯ã€ä¸Šä¼ æ–‡ä»¶ã€æäº¤ä»»åŠ¡å¹¶è‡ªåŠ¨æŸ¥è¯¢ç»“æœçš„å…¨æµç¨‹æ“ä½œã€‚

ä¸»è¦åŠŸèƒ½åŒ…æ‹¬ï¼š

- è¯»å–æœ¬åœ°å·¥ä½œæµé…ç½®ï¼ˆJSON æ–‡ä»¶ï¼‰  
- ç”Ÿæˆå¯ä¿®æ”¹èŠ‚ç‚¹ä¿¡æ¯åˆ—è¡¨ï¼ˆnodeInfoListï¼‰  
- æ ¹æ®èŠ‚ç‚¹ç±»å‹ï¼ˆå›¾ç‰‡ã€æ–‡æœ¬ç­‰ï¼‰ä¿®æ”¹èŠ‚ç‚¹å€¼  
- ä¸Šä¼ å›¾ç‰‡ã€éŸ³é¢‘ã€è§†é¢‘æ–‡ä»¶  
- å‘ RunningHub æäº¤ä»»åŠ¡å¹¶å®æ—¶æŸ¥è¯¢çŠ¶æ€  
- è¾“å‡ºæœ€ç»ˆç”Ÿæˆç»“æœçš„æ–‡ä»¶é“¾æ¥  

âœ… é€‚ç”¨äºæœ‰è‡ªå®šä¹‰å·¥ä½œæµï¼ˆworkflowIdï¼‰çš„é«˜çº§ç”¨æˆ·ï¼Œå¯åœ¨ä¸æ‰“å¼€ç½‘é¡µçš„æƒ…å†µä¸‹è‡ªåŠ¨æ‰§è¡Œ AI å·¥ä½œæµã€‚

---

## 2. æ–‡ä»¶è¯´æ˜ä¸ä¸»è¦å‡½æ•°

### ğŸ’¡ ä¸»è¦æ–‡ä»¶

| æ–‡ä»¶å       | åŠŸèƒ½ |
|-------------|------|
| workflow.py | ä¸»æ‰§è¡Œè„šæœ¬ |
| api.json    | ä» RunningHub ä¸‹è½½çš„å·¥ä½œæµé…ç½®æ–‡ä»¶ï¼ˆåŒ…å«èŠ‚ç‚¹å®šä¹‰ï¼‰ |

### ğŸ”§ æ ¸å¿ƒå‡½æ•°ä»‹ç»

| å‡½æ•°å | åŠŸèƒ½æè¿° |
|--------|----------|
| load_json(file_path) | ä»æœ¬åœ°è¯»å–å¹¶è§£æå·¥ä½œæµ JSON æ–‡ä»¶ |
| convert_to_node_info_list(data) | å°† JSON æ ¼å¼è½¬æ¢ä¸ºèŠ‚ç‚¹ä¿¡æ¯åˆ—è¡¨ |
| upload_file(API_KEY, file_path) | ä¸Šä¼ æœ¬åœ°æ–‡ä»¶ï¼ˆimage/audio/videoï¼‰è‡³ RunningHub |
| submit_task(workflowId, node_info_list, API_KEY) | æäº¤ä»»åŠ¡ï¼Œå¯åŠ¨ AI å·¥ä½œæµæ‰§è¡Œ |
| query_task_outputs(task_id, API_KEY) | è½®è¯¢ä»»åŠ¡æ‰§è¡ŒçŠ¶æ€å¹¶è·å–ç»“æœè¾“å‡º |

---

## 3. æ“ä½œæ­¥éª¤è¯¦è§£

### Step 1ï¸âƒ£ï¼šè¾“å…¥å¿…è¦ä¿¡æ¯

è¿è¡Œè„šæœ¬åï¼Œç³»ç»Ÿä¼šæç¤ºè¾“å…¥ä»¥ä¸‹ä¿¡æ¯ï¼š

```text
è¯·è¾“å…¥ä½ çš„ api_key:
```
è¯´æ˜ï¼šåœ¨ RunningHub æ§åˆ¶å°â€œAPI è°ƒç”¨â€ä¸­å¯è·å¾—ã€‚
ç¤ºä¾‹ï¼š`0s2d1***********2n3mk4`
```
è¯·è¾“å…¥ workflowId:
```
ç¤ºä¾‹ï¼š`1980468315921559554` 
æ¥æºäºé“¾æ¥æœ«å°¾ï¼šhttps://www.runninghub.cn/workflow/1980237776367083521?source=workspace

ç„¶åè¾“å…¥æœ¬åœ°å·¥ä½œæµ JSON æ–‡ä»¶è·¯å¾„ï¼š

```
è¾“å…¥æ‚¨çš„jsonæ–‡ä»¶åœ°å€(jsonæ–‡ä»¶ä¸€å®šè¦åœ¨è‡ªå·±çš„å·¥ä½œå°ä¸­è·å¾—ï¼Œè·å¾—é€”å¾„ä¸ºå¯¼å‡ºå·¥ä½œæµapiåˆ°æœ¬åœ°)ï¼š
```
ç¤ºä¾‹ï¼š`C:\Users\Mayn\Downloads\api.json`

æ­¤æ—¶è„šæœ¬ä¼šè¾“å‡ºå·¥ä½œæµä¸­çš„æ‰€æœ‰èŠ‚ç‚¹ä¿¡æ¯ï¼š

```
ç­‰å¾…node_info_listç”Ÿæˆï¼ˆåŒ…å«æ‰€æœ‰å¯ä¿®æ”¹çš„èŠ‚ç‚¹ï¼‰
{'3': {'inputs': {...}}, '4': {...}, '6': {...}, ...}
```

---

### Step 2ï¸âƒ£ï¼šæŸ¥çœ‹å¹¶ä¿®æ”¹èŠ‚ç‚¹

è„šæœ¬ä¼šæç¤ºï¼š

```text
è¯·è¾“å…¥ nodeIdï¼ˆè¾“å…¥ 'exit' ç»“æŸä¿®æ”¹ï¼‰:
```
        
è¾“å…¥èŠ‚ç‚¹ nodeIdï¼ˆå¦‚ 10ï¼‰ï¼Œè„šæœ¬ä¼šå±•ç¤ºè¯¥èŠ‚ç‚¹çš„æ‰€æœ‰å­—æ®µï¼š

```
ğŸ§© æ‰¾åˆ°èŠ‚ç‚¹ 10 çš„å­—æ®µå¦‚ä¸‹ï¼š
(0, {'nodeId': '10', 'fieldName': 'image', 'fieldValue': 'xxx.jpg'})
```

æ¥ç€è¾“å…¥è¦ä¿®æ”¹çš„å­—æ®µåï¼š

```
è¯·è¾“å…¥è¦ä¿®æ”¹çš„ fieldName:
```
ç¤ºä¾‹ï¼š`image`

---

### Step 3ï¸âƒ£ï¼šä¿®æ”¹å­—æ®µå€¼

#### ğŸ“· å¦‚æœæ˜¯æ–‡ä»¶ç±»å‹ï¼ˆimage/audio/videoï¼‰

```
è¯·è¾“å…¥æ‚¨æœ¬åœ°imageæ–‡ä»¶è·¯å¾„:
```
ç¤ºä¾‹è¾“å…¥ï¼š`D:\R.jpg`

ä¸Šä¼ æˆåŠŸåï¼š

```
ç­‰å¾…æ–‡ä»¶ä¸Šä¼ ä¸­
ä¸Šä¼ ç»“æœ: {'code': 0, 'msg': 'success', 'data': {'fileName': 'api/xxx.jpg', 'fileType': 'input'}}
âœ… å·²æ›´æ–° image fieldValue: api/xxx.jpg
```

#### ğŸ“ å¦‚æœæ˜¯æ–‡æœ¬æˆ–æ•°å€¼ç±»å‹

```
è¯·è¾“å…¥æ–°çš„ fieldValue (text):
```
ç¤ºä¾‹è¾“å…¥ï¼š`1 girl in classroom`

è¿”å›ï¼š

```
âœ… å·²æ›´æ–° fieldValue: 1 girl in classroom
```

> å¯å¤šæ¬¡ä¿®æ”¹ä¸åŒèŠ‚ç‚¹ï¼Œè¾“å…¥ `exit` ç»“æŸã€‚

---

### Step 4ï¸âƒ£ï¼šæäº¤ä»»åŠ¡

è¾“å…¥å®Œæˆåï¼Œè„šæœ¬è‡ªåŠ¨æäº¤ä»»åŠ¡ï¼š

```
å¼€å§‹æäº¤ä»»åŠ¡ï¼Œè¯·ç­‰å¾…
ğŸ“Œ æäº¤ä»»åŠ¡è¿”å›: {'code': 0, 'msg': 'success', 'data': {...}}
ğŸ“ taskId: 1980471280073846785
âœ… æ— èŠ‚ç‚¹é”™è¯¯ï¼Œä»»åŠ¡æäº¤æˆåŠŸã€‚
```

---

### Step 5ï¸âƒ£ï¼šä»»åŠ¡çŠ¶æ€è½®è¯¢

è„šæœ¬æ¯éš” 5 ç§’æŸ¥è¯¢ä»»åŠ¡çŠ¶æ€ï¼š

```
â³ ä»»åŠ¡è¿è¡Œä¸­...
â³ ä»»åŠ¡è¿è¡Œä¸­...
ğŸ‰ ç”Ÿæˆç»“æœå®Œæˆï¼
```

å¦‚æœä»»åŠ¡å¤±è´¥ï¼Œä¼šæ‰“å°è¯¦ç»†åŸå› ï¼š

```
âŒ ä»»åŠ¡å¤±è´¥ï¼
èŠ‚ç‚¹ SaveImage å¤±è´¥åŸå› : 'str' object has no attribute 'shape'
Traceback: [...]
```

---

### Step 6ï¸âƒ£ï¼šæŸ¥çœ‹ç»“æœæ–‡ä»¶

ä»»åŠ¡æˆåŠŸåä¼šè¾“å‡ºç”Ÿæˆæ–‡ä»¶é“¾æ¥ï¼š

```
ğŸ‰ ç”Ÿæˆç»“æœå®Œæˆï¼
[{'fileUrl': 'https://rh-images.xiaoyaoyou.com/f24a6365b08fa3bc02f55cd1f63e74a7/output/ComfyUI_00001_hnqxe_1761016156.png',
  'fileType': 'png',
  'taskCostTime': '35',
  'nodeId': '17'}]
âœ… ä»»åŠ¡å®Œæˆï¼
```

æ‰“å¼€ `fileUrl` å³å¯æŸ¥çœ‹ AI ç”Ÿæˆçš„å›¾ç‰‡ã€‚

## 4. å®Œæ•´è¿è¡Œæµç¨‹æ¦‚è§ˆ

1ï¸âƒ£ è¾“å…¥ API_KEY å’Œ workflowId  
2ï¸âƒ£ åŠ è½½æœ¬åœ° JSON å·¥ä½œæµ  
3ï¸âƒ£ è‡ªåŠ¨ç”Ÿæˆå¯ä¿®æ”¹èŠ‚ç‚¹åˆ—è¡¨  
4ï¸âƒ£ ä¿®æ”¹æ‰€éœ€èŠ‚ç‚¹å‚æ•°  
5ï¸âƒ£ ä¸Šä¼ æ–‡ä»¶ï¼ˆå¦‚å›¾ç‰‡ï¼‰  
6ï¸âƒ£ æäº¤ä»»åŠ¡è‡³ RunningHub  
7ï¸âƒ£ è½®è¯¢ä»»åŠ¡çŠ¶æ€  
8ï¸âƒ£ è·å–å¹¶æ‰“å°ç”Ÿæˆç»“æœé“¾æ¥  

---

## 5. ç¤ºä¾‹è¾“å‡ºç»“æœ

```
è¯·è¾“å…¥ä½ çš„ api_key: a0fada**************b2ke21
è¯·è¾“å…¥ workflowId: ***8315921559***
è¾“å…¥æ‚¨çš„jsonæ–‡ä»¶åœ°å€(jsonæ–‡ä»¶ä¸€å®šè¦åœ¨è‡ªå·±çš„å·¥ä½œå°ä¸­è·å¾—ï¼Œè·å¾—é€”å¾„ä¸ºå¯¼å‡ºå·¥ä½œæµapiåˆ°æœ¬åœ°)ï¼šC:\Users\Mayn\Downloads\api.json
```
```
ğŸ§© æ‰¾åˆ°èŠ‚ç‚¹ 10 çš„å­—æ®µå¦‚ä¸‹ï¼š
(0, {'nodeId': '10', 'fieldName': 'image', 'fieldValue': 'xxx.jpg'})
âœ… å·²æ›´æ–° image fieldValue: api/xxx.jpg
```
```
å¼€å§‹æäº¤ä»»åŠ¡ï¼Œè¯·ç­‰å¾…
ğŸ“Œ æäº¤ä»»åŠ¡è¿”å›: {...}
â³ ä»»åŠ¡è¿è¡Œä¸­...
ğŸ‰ ç”Ÿæˆç»“æœå®Œæˆ!
âœ… ä»»åŠ¡å®Œæˆï¼
```

---

## 6. å°è´´å£«ï¼ˆTipsï¼‰

- å»ºè®®ä½¿ç”¨ Python 3.8+  
- è„šæœ¬å¯ç›´æ¥åœ¨ç»ˆç«¯è¿è¡Œï¼š

```bash
python workflow.py
```

- Windows ç”¨æˆ·æ³¨æ„æ–‡ä»¶è·¯å¾„éœ€ä½¿ç”¨åŒåæ–œæ  `\\`  
- è‹¥ä½¿ç”¨ä»£ç†æˆ–äº‘ä¸»æœºï¼Œè¯·ç¡®ä¿ç«¯å£ 443 å¯è®¿é—® `www.runninghub.cn`

```python
import http.client
import json
import mimetypes
from codecs import encode
import time
import os
import requests
API_HOST = "www.runninghub.cn"
def load_json(file_path):
    # æ‰“å¼€å¹¶è¯»å– JSON æ–‡ä»¶
    with open(file_path, "r", encoding="utf-8") as f:
        data = json.load(f)  # å°† JSON å†…å®¹è§£æä¸º Python å¯¹è±¡ï¼ˆdict æˆ– listï¼‰
    # æ‰“å°è¯»å–åˆ°çš„æ•°æ®
    print(data)
    return data
def convert_to_node_info_list(data):
    node_info_list = []

    for node_id, node_content in data.items():
        inputs = node_content.get("inputs", {})
        for field_name, field_value in inputs.items():
            # å¦‚æœ field_value æ˜¯åˆ—è¡¨æˆ–å­—å…¸ï¼Œå¯ä»¥é€‰æ‹©è½¬æ¢æˆå­—ç¬¦ä¸²
            if isinstance(field_value, (list, dict)):
                field_value = json.dumps(field_value)
            else:
                field_value = str(field_value)

            node_info_list.append({
                "nodeId": str(node_id),
                "fieldName": str(field_name),
                "fieldValue": field_value
            })
    return node_info_list
def upload_file(API_KEY, file_path):
    """
    ä¸Šä¼ æ–‡ä»¶åˆ° RunningHub å¹³å°
    """
    url = "https://www.runninghub.cn/task/openapi/upload"
    headers = {
        'Host': 'www.runninghub.cn'
    }
    data = {
        'apiKey': API_KEY,
        'fileType': 'input'
    }
    with open(file_path, 'rb') as f:
        files = {'file': f}
        response = requests.post(url, headers=headers, files=files, data=data)
    return response.json()
# 1ï¸âƒ£ æäº¤ä»»åŠ¡
def submit_task(workflowId, node_info_list,API_KEY):
    conn = http.client.HTTPSConnection("www.runninghub.cn")
    payload = json.dumps({
        "apiKey": API_KEY,
        "workflowId": workflowId,
        "nodeInfoList": node_info_list
    })
    headers = {
        'Host': 'www.runninghub.cn',
        'Content-Type': 'application/json'
    }
    conn.request("POST", "/task/openapi/create", payload, headers)
    res = conn.getresponse()
    data = res.read()
    # âœ… æ³¨æ„è¿™é‡Œï¼šç”¨ json.loads è€Œä¸æ˜¯ json.load
    data = json.loads(data.decode("utf-8"))
    print(data)
    return data
def query_task_outputs(task_id,API_KEY):
    conn = http.client.HTTPSConnection(API_HOST)
    payload = json.dumps({
        "apiKey": API_KEY,
        "taskId": task_id
    })
    headers = {
        'Host': API_HOST,
        'Content-Type': 'application/json'
    }
    conn.request("POST", "/task/openapi/outputs", payload, headers)
    res = conn.getresponse()
    data = json.loads(res.read().decode("utf-8"))
    conn.close()
    return data
if __name__ == "__main__":
    print("ä¸‹é¢ä¸¤ä¸ªè¾“å…¥ç”¨äºè·å¾—AIå·¥ä½œæµæ‰€éœ€è¦çš„ä¿¡æ¯ï¼Œapi_keyä¸ºç”¨æˆ·çš„å¯†é’¥ä»apiè°ƒç”¨â€”â€”è¿›å…¥æ§åˆ¶å°ä¸­è·å¾—ï¼ŒworkflowIdï¼ˆæ­¤ä¸ºç¤ºä¾‹ï¼Œå…·ä½“çš„workflowIdä¸ºä½ æ‰€é€‰æ‹©çš„AIå·¥ä½œæµç•Œé¢ä¸Šæ–¹çš„é“¾æ¥https://www.runninghub.cn/workflow/1980237776367083521?source=workspaceï¼Œæœ€åçš„æ•°å­—ä¸ºworkflowIdï¼‰")
    Api_key = input("è¯·è¾“å…¥ä½ çš„ api_key: ").strip()
    workflowId = input("è¯·è¾“å…¥ workflowId: ").strip()
    print("è¯·æ‚¨ä¸‹è½½æ‚¨çš„å·¥ä½œæµAPI jsonåˆ°æœ¬åœ°")
    file_path = input("è¾“å…¥æ‚¨çš„jsonæ–‡ä»¶åœ°å€(jsonæ–‡ä»¶ä¸€å®šè¦åœ¨è‡ªå·±çš„å·¥ä½œå°ä¸­è·å¾—ï¼Œè·å¾—é€”å¾„ä¸ºå¯¼å‡ºå·¥ä½œæµapiåˆ°æœ¬åœ°)ï¼š").strip()
    print("ç­‰å¾…node_info_listç”Ÿæˆï¼ˆåŒ…æ¶µæ‰€æœ‰çš„å¯ä»¥ä¿®æ”¹çš„nodeèŠ‚ç‚¹ï¼‰")
    data = load_json(file_path)
    node_info_list =  convert_to_node_info_list(data)
    print(node_info_list)
    print("ä¸‹é¢ç”¨æˆ·å¯ä»¥è¾“å…¥å·¥ä½œæµå¯ä»¥ä¿®æ”¹çš„èŠ‚ç‚¹idï¼šnodeId,ä»¥åŠå¯¹åº”çš„fileName,é”å®šå…·ä½“çš„èŠ‚ç‚¹ä½ç½®ï¼Œåœ¨æ‰¾åˆ°å…·ä½“ä½ç½®ä¹‹åï¼Œè¾“å…¥æ‚¨éœ€è¦ä¿®æ”¹çš„fileValueä¿¡æ¯å®Œæˆä¿¡æ¯çš„ä¿®æ”¹ç”¨æˆ·å‘é€AIå·¥ä½œæµè¯·æ±‚")
    modified_nodes = []
    while True:
        node_id_input = input("è¯·è¾“å…¥ nodeIdï¼ˆè¾“å…¥ 'exit' ç»“æŸä¿®æ”¹ï¼‰: ").strip()
        if node_id_input.lower() == "exit":
            break

        # æ‰¾å‡ºè¯¥ nodeId å¯¹åº”çš„æ‰€æœ‰å­—æ®µ
        node_fields = [n for n in node_info_list if n['nodeId'] == node_id_input]

        if not node_fields:
            print("âŒ æœªæ‰¾åˆ°è¯¥ nodeId å¯¹åº”çš„èŠ‚ç‚¹")
            continue

        print(f"\nğŸ§© æ‰¾åˆ°èŠ‚ç‚¹ {node_id_input} çš„å­—æ®µå¦‚ä¸‹ï¼š")
        for field in enumerate(node_fields):
            print(field)

        # è®©ç”¨æˆ·é€‰æ‹©è¦ä¿®æ”¹çš„å­—æ®µ
        field_name_input = input("\nè¯·è¾“å…¥è¦ä¿®æ”¹çš„ fieldName: ").strip()
        target_node = next(
            (f for f in node_fields if f['fieldName'] == field_name_input), None
        )

        if not target_node:
            print("âŒ æœªæ‰¾åˆ°è¯¥ fieldName")
            continue

        print(f"é€‰ä¸­å­—æ®µ: {target_node}")
        # æ ¹æ®ç±»å‹å¤„ç†
        if target_node['fieldName'] in ["image", "audio", "video"]:
            file_path = input(f"è¯·è¾“å…¥æ‚¨æœ¬åœ°{target_node['fieldName']}æ–‡ä»¶è·¯å¾„: ").strip()
            print("ç­‰å¾…æ–‡ä»¶ä¸Šä¼ ä¸­")
            upload_result = upload_file(Api_key, file_path)
            print("ä¸Šä¼ ç»“æœ:", upload_result)
            # å‡è®¾ upload_file å·²è¿”å›è§£æåçš„ JSON å­—å…¸
            if upload_result and upload_result.get("msg") == "success":
                uploaded_file_name = upload_result.get("data", {}).get("fileName")
                if uploaded_file_name:
                    target_node['fieldValue'] = uploaded_file_name
                    print(f"âœ… å·²æ›´æ–° {target_node['fieldName']} fieldValue:", uploaded_file_name)
            else:
                print("âŒ ä¸Šä¼ å¤±è´¥æˆ–è¿”å›æ ¼å¼å¼‚å¸¸:", upload_result)
        else:
            # å…¶ä»–ç±»å‹ç›´æ¥ä¿®æ”¹
            new_value = input(f"è¯·è¾“å…¥æ–°çš„ fieldValue ({target_node['fieldName']}): ").strip()
            target_node['fieldValue'] = new_value
            print("âœ… å·²æ›´æ–° fieldValue:", new_value)
        modified_nodes.append({
            "nodeId": target_node['nodeId'],
            "fieldName": target_node['fieldName'],
            "fieldValue": target_node['fieldValue']
        })
    print(modified_nodes)
    print("å¼€å§‹æäº¤ä»»åŠ¡ï¼Œè¯·ç­‰å¾…")
    # æäº¤ä»»åŠ¡
    submit_result = submit_task(workflowId, modified_nodes,Api_key)
    print("ğŸ“Œ æäº¤ä»»åŠ¡è¿”å›:", submit_result)
    if submit_result.get("code") != 0:
        print("âŒ æäº¤ä»»åŠ¡å¤±è´¥:", submit_result)
        exit()
    task_id = submit_result["data"]["taskId"]
    print(f"ğŸ“ taskId: {task_id}")
    # è§£ææˆåŠŸè¿”å›
    prompt_tips_str = submit_result["data"].get("promptTips")
    if prompt_tips_str:
        try:
            prompt_tips = json.loads(prompt_tips_str)
            node_errors = prompt_tips.get("node_errors", {})
            if node_errors:
                print("âš ï¸ èŠ‚ç‚¹é”™è¯¯ä¿¡æ¯å¦‚ä¸‹ï¼š")
                for node_id, err in node_errors.items():
                    print(f"  èŠ‚ç‚¹ {node_id} é”™è¯¯: {err}")
            else:
                print("âœ… æ— èŠ‚ç‚¹é”™è¯¯ï¼Œä»»åŠ¡æäº¤æˆåŠŸã€‚")
        except Exception as e:
            print("âš ï¸ æ— æ³•è§£æ promptTips:", e)
    else:
        print("âš ï¸ æœªè¿”å› promptTips å­—æ®µã€‚")
    timeout = 600
    start_time = time.time()
    while True:
        outputs_result = query_task_outputs(task_id, Api_key)
        code = outputs_result.get("code")
        msg = outputs_result.get("msg")
        data = outputs_result.get("data")
        if code == 0 and data:  # æˆåŠŸ
            file_url = data[0].get("fileUrl")
            print("ğŸ‰ ç”Ÿæˆç»“æœå®Œæˆï¼")
            print(data)
            break
        elif code == 805:  # ä»»åŠ¡å¤±è´¥
            failed_reason = data.get("failedReason") if data else None
            print("âŒ ä»»åŠ¡å¤±è´¥ï¼")
            if failed_reason:
                print(f"èŠ‚ç‚¹ {failed_reason.get('node_name')} å¤±è´¥åŸå› : {failed_reason.get('exception_message')}")
                print("Traceback:", failed_reason.get("traceback"))
            else:
                print(outputs_result)
            break
        elif code == 804 or code == 813:  # è¿è¡Œä¸­æˆ–æ’é˜Ÿä¸­
            status_text = "è¿è¡Œä¸­" if code == 804 else "æ’é˜Ÿä¸­"
            print(f"â³ ä»»åŠ¡{status_text}...")
        else:
            print("âš ï¸ æœªçŸ¥çŠ¶æ€:", outputs_result)
        # è¶…æ—¶æ£€æŸ¥
        if time.time() - start_time > timeout:
            print("â° ç­‰å¾…è¶…æ—¶ï¼ˆè¶…è¿‡10åˆ†é’Ÿï¼‰ï¼Œä»»åŠ¡æœªå®Œæˆã€‚")
            break
        time.sleep(5)
    print("âœ… ä»»åŠ¡å®Œæˆï¼")
```
